{% extends "views/base.html" %}
{% block content %}

<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/3.3.4/css/bootstrap2/bootstrap-switch.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/3.3.4/js/bootstrap-switch.js"></script>
<script type="text/javascript" src="{{url_for("main.static", filename="js/strftime.js")}}"></script>
<script type="text/javascript" src="{{url_for("main.static", filename="js/alice.js")}}"></script>
<script type="text/javascript" src="{{url_for("main.static", filename="js/recent.js")}}"></script>
<script type="text/javascript" src="{{url_for("main.static", filename="js/admin.js")}}"></script>

<script>
  document.write("<style type='text/css'> body{display:none}</style>");
  jQuery(function($){
      init();
      $("body").css("display","block");
  });
</script>

<div class="container">
  <!-- Agency settings data -->
	<div name="settings_data" hidden>
		{{ agency_config|safe }}
	</div>

	<!-- Nav tabs -->
	<ul style="margin-bottom:2em" class="nav nav-tabs" role="tablist">
		<li class="nav-item">
			<a class="nav-link active" data-toggle="tab" href="#me" role="tab">Me</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" data-toggle="tab" href="#services" role="tab">3rd Party Services</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" data-toggle="tab" href="#previewer" role="tab">Previewer</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" data-toggle="tab" href="#leaderboard" role="tab">Leaderboard</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" data-toggle="tab" href="#properties" role="tab">Properties</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" data-toggle="tab" href="#alice" role="tab">Alice</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" data-toggle="tab" href="#recent" role="tab">Recent</a>
		</li>
	</ul>

	<div class="tab-content">
    <!-- Me Pane -->
		<div class="tab-pane active" id="me" style='margin-bottom:7em' role="tabpanel">
      <form id="user_form">
        <fieldset style="max-width:600px" class="form-fieldset new_event">
          <legend class="new_event">My Settings</legend>
            <div class='form-label'>Name: 
              <b><label id="first_name"></label></b>
            </div>
            <div class='form-label'>Username: 
              <b><label id="user_name"></label></b>
            </div>
            <div class='form-label'>Administrator: 
              <b><label id="is_admin"></label></b>
            </div>
            <div style="margin:1.5em 0em">
              <button id='logout' style="float:right" type="button" class="btn btn-primary">Logout</button>
            </div>
        </fieldset>
        <fieldset style="max-width:600px" class="form-fieldset new_event">
          <legend class="new_event">Admin</legend>
            <div class='form-label'>Admin Panel: 
              <input type="checkbox" name="adm_panl_check" checked>
            </div>
        </fieldset>
      </form>
    </div>
    <!-- Services Pane -->
		<div class="tab-pane" id="services" style='margin-bottom:7em' role="tabpanel">
      <form>
        <fieldset style="max-width:600px" class="form-fieldset new_event">
          <legend class="new_event">CRM</legend>
            <div class='form-label'>Service: <b>eTapestry v7.2.9</b></div>
            <div class='form-label'>Organization: 
              <b><label id="crm_org_name"></b></label>
            </div>
            <div class='form-label'>Account ID: 
              <b><label id="crm_acct_id"></label></b>
            </div>
            <div class='form-label'>API: <b>v3</b></div>
        </fieldset>
        <fieldset style="max-width:600px" class="form-fieldset new_event">
          <legend class="new_event">Google</legend>
            <div class='form-label'>Service Account ID: 
              <label id='service_acct' data-toggle="tooltip" data-placement="right" 
                     title=""><b>bravo-738</b>
                <i class="fa fa-question-circle-o"></i>
              </label>
            </div>
            <div class='form-label'>Linked Calendars: 
              <a id="linked_cal" data-toggle="tooltip" data-placement="right" 
                 title="" href="">routes</a>
            </div>
            <div class='form-label'>Linked Sheets:
              <a href="">Bravo Sheets</a>
            </div>
        </fieldset>
        <fieldset style="max-width:600px" class="form-fieldset new_event">
          <legend class="new_event">Notify</legend>
            <div class='form-label'>Voice/SMS Service: <b>Twilio</b></div>
            <div class='form-label'>Account ID: 
              <b><label id="twilio_acct_id"></label></b>
            </div>
            <div class='form-label'>API: <b>v5.7.0</b></div>
            <div class='form-label'>Phone Number: 
              <b><label id="phone_number"></label></b>
            </div>
            <div class='form-label'>Email Service: <b>Mailgun</b></div>
            <div class='form-label'>Account ID: 
              <b><label id="mailgun_acct_id"></b></label>
            </div>
            <div class='form-label'>API: <b>v3</b></div>
            <div style="margin-top:1em" class='form-label'>
              <label style="border-bottom:1px solid white; padding-bottom:3px; letter-spacing:1px;">SETTINGS</label>
            </div>
            <div class='form-label'>Pre-schedule Days <i class="fa fa-question-circle-o"></i></div>
            <input id="sched_delta_days" class="input">
            <div class='form-label'>Days in Advance to Send Emails</div>
            <input id="email_fire_days_delta" class="input">
            <div class='form-label'>Time to Send Emails</div>
            <input id="email_fire_hour" class="input">
            <div class='form-label'>Days in Advance to Send Voice/SMS</div>
            <input id="voice_sms_fire_days_delta" class="input">
            <div class='form-label'>Time to Send Voice/SMS</div>
            <input id="voice_sms_fire_hour" class="input">
            <div style="margin:1.5em 0em">
              <button style="float:right" type="button" class="btn btn-primary">Save Changes</button>
            </div>
        </fieldset>
        <fieldset style="max-width:600px" class="form-fieldset new_event">
          <legend class="new_event">Routing</legend>
            <div class='form-label'>Routing Service: <b>Routific</b></div>
            <div class='form-label'>Account ID: 
              <b><label id="routing_acct_id"></b></label>
            </div>
            <div class='form-label'>API: <b>v1.5.0</b></div>
            <div style="margin-top:1em" class='form-label'>
              <label style="border-bottom:1px solid white; padding-bottom:3px; letter-spacing:1px;">SETTINGS</label>
            </div>
            <div class='form-label'>Build Routes Time</div>
            <input class="input">
            <div class='form-label'>Depots</div>
            <select name="type_" class="form-control">
              <option>Depot A</option>
              <option>Depot B</option>
              <option>Depot C</option>
            </select>
            <div style="margin:1.5em 0em">
              <button style="float:right" type="button" class="btn btn-primary">Save Changes</button>
            </div>
        </fieldset>
      </form>
    </div>
    <!-- Previewer Pane -->
		<div class="tab-pane" id="previewer" style='margin-bottom:5em' role="tabpanel">
        <fieldset style='margin-top:4em' class="form-fieldset">
          <legend>Email Receipts</legend>
          <table border="0" cellpadding="5" cellspacing="10">
            <form id='receipt_form' style='margin-top:4em'>
              <tr>
                <td>
                  <select name="type_" class="form-control">
                    <option value="donation">Donation</option>
                    <option value="no_donation">No Donation</option>
                    <option value="zero_donation">$0 Donation</option>
                    <option value="post_drop">Post Dropoff</option>
                    <option value="cancelled">Cancellation</option>
                  </select>
                </td>
                <td>
                  <button id="receipt_btn" class="btn btn-info">Preview</button>
                </td>
              </tr>
            </form>
          </table>
        </fieldset>
        <fieldset style='margin-top:2em' class="form-fieldset">
          <legend>Email Notifications</legend>
          <table border="0" cellpadding="5" cellspacing="10">
            <form id='email_notific_form' style='margin-top:2em' disabled>
            <tr>
              <td>
                <input name="template" value="reminder" hidden></input>
                <select name="state" class="form-control">
                  <option value="res_pickup">Residential Pickup</option>
                  <option value="res_drop">Residential Dropoff</option>
                  <option value="res_cancel">Residential Cancelling</option>
                  <option value="bus_pickup">Business Pickup</option>
                </select>
              </td>
              <td>
                <button id="email_notific_btn" class="btn btn-info">Preview</button>
              </td>
            </tr>
            </form>
          </table>
        </fieldset>
        <fieldset style='margin-top:2em' class="form-fieldset">
          <legend>Voice Notifications</legend>
          <table border="0" cellpadding="5" cellspacing="10">
            <form id='voice_notific_form' style='margin-top:2em' disabled>
            <tr>
              <td>
                <select name="type_" class="form-control" disabled>
                  <option value="res_pickup">Residential Pickup</option>
                  <option value="res_drop">Residential Dropoff</option>
                  <option value="res_cancel">Residential Cancelling</option>
                  <option value="bus_pickup">Business Pickup</option>
                </select>
              </td>
              <td>
                <button id="notific_btn" class="btn btn-info" disabled>Preview</button>
              </td>
            </tr>
            </form>
          </table>
        </fieldset>
        <fieldset style='margin-top:2em' class="form-fieldset">
          <legend>SMS Notifications</legend>
          <table border="0" cellpadding="5" cellspacing="10">
            <form id='sms_notific_form' style='margin-top:2em'>
            <tr>
              <td>
                <select name="type_" class="form-control">
                  <option value="res_pickup">Residential Pickup</option>
                </select>
              </td>
              <td>
                <button id="sms_btn" class="btn btn-info">Preview</button>
              </td>
            </tr>
            </form>
          </table>
        </fieldset>
    </div>
    <!-- Leaderboard Pane -->
		<div class="tab-pane" id="leaderboard" style='margin-bottom:7em' role="tabpanel">
    </div>
    <!-- Properties Pane -->
		<div class="tab-pane" id="properties" style='margin-bottom:7em' role="tabpanel">
      <form>
        <fieldset style="max-width:600px" class="form-fieldset new_event">
          <legend class="new_event">Statistics</legend>
            <div class='form-label'>Alice Conversations: 
              <b><label id="n_alice_convos"></label></b>
            </div>
            <div class='form-label' hidden>Alice SMS Received: 
              <b><label id="n_alice_received"></label></b>
            </div>
            <div class='form-label'>Visual Maps Synchronized:
              <b><label id='n_maps_indexed'></label></b>
            </div>
            <div class='form-label'>Notification Events:
              <b><label id='n_notific_events'></label></b>
            </div>
            <div class='form-label' hidden>Emails Sent:
              <b><label id='n_emails_sent'></label></b>
            </div>
            <div class='form-label'>Leaderboard Accounts Tracked:
              <b><label id='n_leaderboard_accts'></label></b>
            </div>
            <div class='form-label'>Users Registered:
              <b><label id='n_users'></label></b>
            </div>
            <div class='form-label'>Sessions Active:
              <b><label id='n_sessions'></label></b>
            </div>
        </fieldset>
      </form>
    </div>
    <!-- Alice Pane -->
		<div class="tab-pane" id="alice" style='margin-bottom:7em' role="tabpanel">
      <div class="card" style="margin-top:2em; visibility:hidden;">
        <div class="card-header">
          <label style="font-weight:400; font-size:1.5rem" class="">Recent Conversations</label>
        </div>
      </div>
      <div id="convo_list" class="list-group">
      </div>
    </div>
    <!-- Recent Pane -->
		<div class="tab-pane" id="recent" style='margin-bottom:7em' role="tabpanel">
      <div>
        <fieldset class="form-fieldset new_event" style="margin:0; padding:.5em 2em;">
          <legend class="new_event">Filter Events</legend>
            <form id='filtr_lvls' class="form-inline">
              <div class="form-check mb-1 mr-sm-2 mb-sm-0">
                <label style="font-size:14pt" class="form-check-label mr-2">Levels</label>
              </div>
              <div class="form-check mr-2 mb-1 mr-sm-2 mb-sm-0">
                <label class="form-check-label">
                  <input name="dbg_lvl" class="form-check-input" type="checkbox"> Debug
                </label>
              </div>
              <div class="form-check mr-2 mb-1 mr-sm-2 mb-sm-0">
                <label class="form-check-label">
                  <input name="inf_lvl" class="form-check-input" type="checkbox" checked> Info
                </label>
              </div>
              <div class="form-check mr-2 mb-1 mr-sm-2 mb-sm-0">
                <label class="form-check-label">
                  <input name="wrn_lvl" class="form-check-input" type="checkbox" checked> Warnings
                </label>
              </div>
              <div class="form-check mr-2 mb-1 mr-sm-2 mb-sm-0">
                <label class="form-check-label">
                  <input name="err_lvl" class="form-check-input" type="checkbox" checked> Errors
                </label>
              </div>
            </form>
            <form id='filtr_grps' class="form-inline">
              <div class="form-check mb-1 mr-sm-2 mb-sm-0">
                <label style="font-size:14pt" class="form-check-label mr-2">Groups</label>
              </div>
              <div class="form-check mr-2 mb-1 mr-sm-2 mb-sm-0">
                <label class="form-check-label">
                  <input name="usr_grp" class="form-check-input" type="checkbox" checked> Organization
                </label>
              </div>
              <div class="form-check mr-2 mb-1 mr-sm-2 mb-sm-0">
                <label class="form-check-label">
                  <input name="sys_grp" class="form-check-input" type="checkbox"> System
                </label>
              </div>
              <div class="form-check mr-2 mb-1 mr-sm-2 mb-sm-0">
                <label class="form-check-label">
                  <input name="anon_grp" class="form-check-input" type="checkbox"> Unregistered
                </label>
              </div>
            </form>
          </fieldset>
      </div>
      <div id='recnt_list' class="list-group">
      </div>
    </div>
	</div> <!--END TAB_CONTENT-->

	<!-- Loader-->
  <div>
    <div class="loader-div" style="background:white; display:none">
      <button class="btn btn-info loader">
        <span class="fa fa-refresh loader-animate"></span>
        <label style="margin-bottom:0; margin-left:5px">Loading...</label>
      </button>
    </div>
  </div>
	<!-- Log Entry Modal -->
	<div id="log_modal" class="modal fade bd-example-modal-lg" tabindex="-1"
       role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg admin-modal">
			<div class="modal-content" style="min-width:600px; max-width:1000px;">
        <div class="modal-header admin-modal-header bg-info text-white">
          <h3 class="modal-title">Modal title</h3>
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        </div>
        <div class="modal-body">
          <p></p>
        </div>
        <div class="modal-footer">
          <button id="btn-default" type="button" class="btn btn-secondary btn-lg" data-dismiss="modal">Close</button>
        </div>
			</div>
		</div>
	</div>
	<!-- Chat Modal -->
	<div id="chat_modal" class="modal fade bd-example-modal-lg" tabindex="-1"
       role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg admin-modal">
			<div class="modal-content" style="min-width:1000px; max-width:1000px;">
        <div class="modal-header admin-modal-header bg-info text-white">
          <h3 class="modal-title">Modal title</h3>
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        </div>
        <div class="modal-body">
          <div>
            <table id="chatlog" class="table table-responsive table-sm" style="max-height:300px">
            </table>
            <div>
              <div class="form-inline">
                <input class="form-control col-10 mr-sm-4" type="text" value="">
                  <button id="send_sms" type="button" class="btn btn-primary">Send SMS</button>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
        </div>
			</div>
		</div>
	</div>





</div>

  {% endblock %}
