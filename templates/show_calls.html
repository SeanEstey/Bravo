  {% extends "base.html" %}
  {% block content %} 
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>
  <script>
    document.write('<style type="text/css">body{display:none}</style>');
    jQuery(function($){
      initShowCallsView();
    });
  </script>
  <br><br>
  <div class='h1' id='timer'>
    <b><label id='job-status'>{{ job.status.title() }}</label></b>
     (<label id='job-summary'></label>)
    <p id='scheduled_datetime' style='display:none'>{{ job.fire_dtime }}</p>
  </div>
  <br><br>
  <div class="show-jobs-div">
  <div class='navbar-div'>
    <a class='hover' href="{{ url_for('show_jobs') }}">Jobs</a> / 
    {{ job.name }}
  </div>
    <table id='show-calls-table' class='data-table2' style='width:1050px;'>
      <thead>
        <tr>
          {% set col_num=1 %}
          {% for column in template %}
          <th id='col{{ col_num }}'><a title='Sort' class='hover' href='#'>{{ column['field'].title().replace('_', ' ') }}</a></th>
          {% set col_num = col_num + 1 %}
          {% endfor %}
          <th id='col{{template|length+1}}'><a title='Sort' class='hover' href='#'>Status</a></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% set row_num=1 %}
        {%  for call in calls %}
        <tr id='{{ call._id }}'>
          {% for column in template %}
            <td name='{{column.field}}'>{{call.imported[column.field]}}</td>
          {% endfor %}
          {% if call.call_status == "completed" %}
            {% if call.answered_by == "machine" %}
              {% set caption="Sent Voicemail" %}
            {% else %}
              {% set caption="Sent Live" %}
            {% endif %}
              <td name='call_status' title='"{{call.speak}}"' class='call-status-td' >{{caption}}</td>
          {% elif call.call_status == "pending" %}
            <td name='call_status' class='call-status-td'>Pending</td>
          {% elif call.call_status == "failed" %}
            <td name='call_status' class='call-status-td'>Failed ({{call.error_msg}})</td>
          {% else %}
            <td name='call_status' class='call-status-td' >{{ call.call_status + ' (' ~ call.attempts + 'x)' }}</td>
          {% endif %}
          <td>
            <button 
              class='delete-btn' 
              type="button" 
              id="{{ call._id }}" 
              name="delete-btn">
            </button>
          </td>
        </tr>
        {% set row_num = row_num + 1 %}
        {% endfor %}
    </tbody>
    </table>
  </div>
  <div>
    <br><br>
    <a class='hover' id='execute-job' href="#">[Start Job]</a>
    <a class='hover' id='reset-job' href="#">[Reset Job]</a>
    <a class='hover' id='dump' href='#'>[DB Dump]</a>
  </div>
  {% endblock %}
